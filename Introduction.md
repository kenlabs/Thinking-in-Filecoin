## Filecoin介绍

* Filecoin是一个基于区块链机制的分布式存储网络。

* 简单来说，在Filecoin网络中，存储提供者为网络提供存储空间，然后通过周期生成加密证明（证明他们提供了指定的存储空间），从而获得Filecoin网络的通证奖励（单位为FIL）。

* 除此之外，Filecoin也维护一个共享的区块链账本，用来支持通证的转账交易。

* 重要的是，Filecoin并没有使用中本聪风格的工作量证明来维持区块链上共识，而是使用存储证明本身：共识协议中的矿工的出块能力与其提供的存储空间容量成比例。

* Filecoin区块链不仅维护通证交易和账户的账本，并且实现了一个虚拟机，一个复制状态机，在网络参与者之间执行各种加密合约和市场机制。这些合约包括存储订单：客户支付FIL货币给存储提供者，以交换存储客户要求的特定文件数据。

* 通过Filecoin 虚拟机的分布式实现，存储交易和其他记录在链上的合约机制将随着时间的推移自动处理，而不需要合约的原始各方（比如请求数据存储的客户端）的进一步交互。

``` 
taoshengshi解读：Filecoin既有以比特币为代表的区块链的功能，又有激励存储的功能。Filecoin的虚拟机是其特色，不仅可以处理交易，也可以维护合约的自动执行。
```

## 关键概念

* **数据结构**是语义标记的数据成员的集合。
* **函数**不依赖外部状态的计算过程。	
* **组件**是可以独立实现的功能集合。根据使用语言和特定组件的不同，组件可能对应于单个软件模块、运行某个循环的线程或进程、基于磁盘的数据库或各种其他设计选择。例如，ChainSync就是一个组件，它可以被实现为运行单个指定循环的进程或线程，该循环等待网络消息，并通过记录和转发区块数据。
* **API**是向组件传递消息的接口。API也可以认为是协议呈现给客户端的视图，比如对矿工节点的Storage Provider组件的API发起请求，用于在存储市场中存储文件。
* **节点**是与协议交互的完整软件和硬件系统。一个节点可能运行几个组件，参与几个子系统，并在本地或通过网络公开API，这取决于节点的配置。术语**“完整节点”**指的是运行所有组件并支持规范规定所有API的系统。
* **子系统**是整个协议的概念划分，这种划分方法可以从协议角度来划分（例如存储市场或检索市场），也可以从功能角度来划分（虚拟机），但子系统不一定对应于任何特定的节点组件或软件组件。
* **Actor**是指包含在虚拟机子系统状态中的虚拟实体。协议中的Actor类似于智能合约的参与方。Actor承载FIL通证余额，可以通过虚拟机的操作与其他Actor交互。但Actor不一定对应于任何特定的节点或软件组件。

```
taoshengshi解读：Filecoin的系统设计采用了清晰的概念体系：程序等于数据结构+算法，算法由函数体现。程序完成特定的功能，功能集合定义为组件，组件对外暴露API并接收外部的消息。组件构成节点，节点根据配置完成子系统的功能。子系统是协议的概念划分。子系统中的参与实体是Actor。
```

## Filecoin虚拟机

Filecoin用户面对的大部分功能（比如，支付、存储市场、存力表等）是通过Filecoin虚拟机来管理的。

虚拟机管理的内容包括：

* Filecoin网络生成一系列区块，并确定哪条区块链是正确的。每个区块都包含一系列称为消息的状态转换，以及应用这些消息后当前全局状态的检查点。
* 这里的全局状态由一系列Actor组成，每个Actor都有自己的私有状态。
* Filecoin中的Actor等同于以太坊的智能合约。Actor本质上是Filecoin网络中的一个“对象”，具有私有状态和一组可用于与其交互的方法。每个Actor都有一个归属于它的Filecoin通证余额、一个状态指针、一个code CID（标识Actor的类型），以及一个nonce（跟踪该Actor发送的消息数量）。
* 有两种途径来调用Actor上的方法。
* 首先，要作为系统的外部参与者（也就是使用Filecoin的普通用户）调用一个方法，必须向网络发送一个签名消息，并向打包消息的矿工支付费用。消息上的签名必须与一个帐户相关联的密钥相匹配，并且具有足够的Filecoin通证以支付消息的执行费用。这里的费用相当于比特币和以太坊的交易费用， 并且交易费用与处理消息所完成的工作成比例（比特币按字节为消息定价，以太坊使用“gas”的概念。Filecoin也用gas的概念）。
* 其次，一个Actor可以在调用方法期间调用另一个Actor的方法。然而，这种情况唯一可能发生的时候是由于外部用户的消息调用了某些Actor（注意：用户调用的参与者可能调用另一个参与者，然后该参与者再调用另一个参与者，执行的深度可能会很多）。

```
虚拟机在Filecoin网络中处于中心位置。其核心概念是消息对全局状态的修改，而全局状态是由Actor这样的智能体组成。这样消息对全局状态的修改就变成了消息对Actor状态的修改，也就是对于Actor自身方法的调用。
```



